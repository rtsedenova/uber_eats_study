var _=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var m=(r,e,t)=>(_(r,e,"read from private field"),t?t.call(r):e.get(r)),i=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},v=(r,e,t,a)=>(_(r,e,"write to private field"),a?a.call(r,t):e.set(r,t),t);var d=(r,e,t)=>(_(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();class K{constructor(e){this.cardInfo=e,this.meals=[]}addMeal(e){this.meals.push(e)}}class G{constructor(e,t,a,s,n,o,c,l){this.id=e,this.img=t,this.name=a,this.desc1=s,this.desc2=n,this.item_name=o,this.item_img=l,this.price=c}}class Q{constructor(e,t,a,s,n){this.restaurantId=e,this.b_name=t,this.item_name=a,this.price=s,this.item_img=n}}const x=document.querySelector("#cards-container"),P=document.querySelector("#loader-container");var h,C,p,b,A,y,D,I,k,S,q,O,T,N,J,R,z,E,j,w,M;class U{constructor(){i(this,b);i(this,y);i(this,I);i(this,S);i(this,O);i(this,N);i(this,R);i(this,E);i(this,w);i(this,h,void 0);i(this,C,void 0);i(this,p,void 0);v(this,C,window.location.pathname),v(this,h,[]),v(this,p,{meals:1,restaurants:2})}transition(){document.querySelectorAll(".card").forEach(t=>{t.addEventListener("click",a=>{const s=a.currentTarget,n=m(this,h).find(o=>o.cardInfo.id===parseInt(s.dataset.id));sessionStorage.setItem("selectedRestaurant",JSON.stringify(n)),window.location.href="pages/restDetails.html"})})}async init(){document.addEventListener("DOMContentLoaded",async()=>{switch(m(this,C)){case"/":try{d(this,E,j).call(this),d(this,S,q).call(this)}catch(e){console.error("Error initializing app:",e)}finally{d(this,w,M).call(this)}break;case"/pages/restDetails.html":try{document.addEventListener("DOMContentLoaded",()=>{d(this,E,j).call(this)}),d(this,O,T).call(this)}catch(e){console.error("Error initializing app:",e)}finally{document.addEventListener("DOMContentLoaded",()=>{d(this,w,M).call(this)})}break}})}}h=new WeakMap,C=new WeakMap,p=new WeakMap,b=new WeakSet,A=function(e,t){const a=document.createElement("div");a.classList.add("card"),a.setAttribute("data-id",e.id);const s=document.createElement("img");s.src=e.img,a.appendChild(s);const n=document.createElement("div");n.classList.add("info");const o=document.createElement("div");o.classList.add("name"),o.textContent=e.name;const c=document.createElement("div");if(c.classList.add("desc1"),c.textContent=e.desc1,n.appendChild(o),n.appendChild(c),a.appendChild(n),t==m(this,p).restaurants){const l=document.createElement("div");l.classList.add("desc2"),l.textContent=e.desc2,n.appendChild(l)}return a},y=new WeakSet,D=async function(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch data");return await t.json()}catch(t){throw console.error("Error fetching data:",t),t}},I=new WeakSet,k=async function(){try{const e=await d(this,y,D).call(this,"/src/json/data.json"),t=await d(this,y,D).call(this,"/src/json/menu.json");e.forEach(a=>{const s=new G(a.id,a.img,a.name,a.desc1,a.desc2),n=new K(s),o=t.find(c=>c.id===a.id);if(o){const c=[];for(const l of Object.keys(o.blocks))o.blocks[l].forEach(({b_name:u,items_list:f})=>{f.forEach(({item_name:g,price:F,item_img:B})=>{const H=new Q(a.id,u,g,F,B);c.push(H)})});n.meals=c}m(this,h).push(n)}),sessionStorage.setItem("restaurants",JSON.stringify(m(this,h)))}catch(e){throw console.error("Error initializing restaurants:",e),e}},S=new WeakSet,q=async function(){await d(this,I,k).call(this),m(this,h).forEach(e=>{const t=d(this,b,A).call(this,e.cardInfo,m(this,p).restaurants);this.transition(),x.appendChild(t)})},O=new WeakSet,T=function(){d(this,N,J).call(this),d(this,R,z).call(this)},N=new WeakSet,J=function(){const e=document.querySelector(".restaurant-info"),t=JSON.parse(sessionStorage.getItem("selectedRestaurant")),a=t.cardInfo.img,s=t.cardInfo.name,n=t.cardInfo.desc1,o=t.cardInfo.desc2,c=document.createElement("img");c.classList.add("bg-image"),c.src=a;const l=document.createElement("div");l.classList.add("info_2");const L=document.createElement("div");L.classList.add("name_2"),L.textContent=s;const u=document.createElement("div");u.classList.add("row-info");const f=document.createElement("div");f.classList.add("desc1_2"),f.textContent=n;const g=document.createElement("div");g.classList.add("desc2_2"),g.textContent=o,u.appendChild(f),u.appendChild(g),l.appendChild(L),l.appendChild(u),e.appendChild(c),e.appendChild(l)},R=new WeakSet,z=function(){const e=document.getElementById("menuNav"),t=JSON.parse(sessionStorage.getItem("selectedRestaurant")),a=new Set;t.meals.forEach(s=>{if(!a.has(s.b_name)){const n=document.createElement("a");n.setAttribute("href",""),n.textContent=s.b_name,e.appendChild(n),a.add(s.b_name)}})},E=new WeakSet,j=function(){P.classList.remove("hidden"),x.classList.add("hidden")},w=new WeakSet,M=function(){P.classList.add("hidden"),x.classList.remove("hidden")};const V=new U;V.init();export{U as A};
