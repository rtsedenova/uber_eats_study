System.register([],(function(t,e){"use strict";return{execute:function(){class e{constructor(t){this.cardInfo=t,this.meals=[]}addMeal(t){this.meals.push(t)}}class s{constructor(t,e,s,a,n,i,r,c){this.id=t,this.img=e,this.name=s,this.desc1=a,this.desc2=n,this.item_name=i,this.item_img=c,this.price=r}}class a{constructor(t,e,s,a,n){this.restaurantId=t,this.b_name=e,this.item_name=s,this.price=a,this.item_img=n}}const n=document.querySelector("#cards-container"),i=document.querySelector("#loader-container");class r{#t;#e;#s;constructor(){this.#e=window.location.pathname,this.#t=[],this.#s={meals:1,restaurants:2}}#a(t,e){const s=document.createElement("div");s.classList.add("card"),s.setAttribute("data-id",t.id);const a=document.createElement("img");a.src=t.img,s.appendChild(a);const n=document.createElement("div");n.classList.add("info");const i=document.createElement("div");i.classList.add("name"),i.textContent=t.name;const r=document.createElement("div");if(r.classList.add("desc1"),r.textContent=t.desc1,n.appendChild(i),n.appendChild(r),s.appendChild(n),e==this.#s.restaurants){const e=document.createElement("div");e.classList.add("desc2"),e.textContent=t.desc2,n.appendChild(e)}return s}transition(){document.querySelectorAll(".card").forEach((t=>{t.addEventListener("click",(t=>{const e=t.currentTarget,s=this.#t.find((t=>t.cardInfo.id===parseInt(e.dataset.id)));sessionStorage.setItem("selectedRestaurant",JSON.stringify(s)),window.location.href="pages/restDetails.html"}))}))}async#n(t){try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch data");return await e.json()}catch(e){throw console.error("Error fetching data:",e),e}}async#i(){try{const t=await this.#n("/src/json/data.json"),n=await this.#n("/src/json/menu.json");t.forEach((t=>{const i=new s(t.id,t.img,t.name,t.desc1,t.desc2),r=new e(i),c=n.find((e=>e.id===t.id));if(c){const e=[];for(const s of Object.keys(c.blocks))c.blocks[s].forEach((({b_name:s,items_list:n})=>{n.forEach((({item_name:n,price:i,item_img:r})=>{const c=new a(t.id,s,n,i,r);e.push(c)}))}));r.meals=e}this.#t.push(r)})),sessionStorage.setItem("restaurants",JSON.stringify(this.#t))}catch(t){throw console.error("Error initializing restaurants:",t),t}}async#r(){await this.#i(),this.#t.forEach((t=>{const e=this.#a(t.cardInfo,this.#s.restaurants);this.transition(),n.appendChild(e)}))}#c(){this.#d(),this.#o()}#d(){const t=document.querySelector(".restaurant-info"),e=JSON.parse(sessionStorage.getItem("selectedRestaurant")),s=e.cardInfo.img,a=e.cardInfo.name,n=e.cardInfo.desc1,i=e.cardInfo.desc2,r=document.createElement("img");r.classList.add("bg-image"),r.src=s;const c=document.createElement("div");c.classList.add("info_2");const d=document.createElement("div");d.classList.add("name_2"),d.textContent=a;const o=document.createElement("div");o.classList.add("row-info");const h=document.createElement("div");h.classList.add("desc1_2"),h.textContent=n;const m=document.createElement("div");m.classList.add("desc2_2"),m.textContent=i,o.appendChild(h),o.appendChild(m),c.appendChild(d),c.appendChild(o),t.appendChild(r),t.appendChild(c)}#o(){const t=document.getElementById("menuNav"),e=JSON.parse(sessionStorage.getItem("selectedRestaurant")),s=new Set;e.meals.forEach((e=>{if(!s.has(e.b_name)){const a=document.createElement("a");a.setAttribute("href",""),a.textContent=e.b_name,t.appendChild(a),s.add(e.b_name)}}))}#h(){i.classList.remove("hidden"),n.classList.add("hidden")}#m(){i.classList.add("hidden"),n.classList.remove("hidden")}async init(){document.addEventListener("DOMContentLoaded",(async()=>{switch(this.#e){case"/":try{this.#h(),this.#r()}catch(t){console.error("Error initializing app:",t)}finally{this.#m()}break;case"/pages/restDetails.html":try{document.addEventListener("DOMContentLoaded",(()=>{this.#h()})),this.#c()}catch(t){console.error("Error initializing app:",t)}finally{document.addEventListener("DOMContentLoaded",(()=>{this.#m()}))}}}))}}t("A",r),(new r).init()}}}));
